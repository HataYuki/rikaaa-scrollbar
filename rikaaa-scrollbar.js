/**
 * @license
 * rikaaa-scrollbar.js
 *
 * Generated : 2019-08-05
 * Version : 1.1.0
 * Author : rikaaa.org | Yuki Hata
 * Url : http://rikaaa.org
 *
 *
 * The MIT License (MIT)
 *
 * Copyright 2019 rikaaa.org | Yuki Hata
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t,n){return(i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return i(e,arguments,r(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a(o,e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e,t,n){return Math.max(t,Math.min(n,e))},c=function(){function t(n,r){e(this,t),this._type=n||"linear",this._t=0,this._d=r}return n(t,[{key:"Convarsion",value:function(e){return e>=1?1:e}},{key:"ease_in",value:function(){return this._t*this._t}},{key:"ease_out",value:function(){return this._t*(2-this._t)}},{key:"ease_in_out",value:function(){return this._t<.5?2*this._t*this._t:(4-2*this._t)*this._t-1}},{key:"linear",value:function(){return this._t}},{key:"Start",value:function(e){this._now=performance.now();var t=this;return requestAnimationFrame(function n(r){t.requ=requestAnimationFrame(n);t._t=t.Convarsion((r-t._now)/t._d);switch(t._type.replace(/-/g,"_")){case"linear":e(t.linear());break;case"ease_in":e(t.ease_in());break;case"ease_out":e(t.ease_out());break;case"ease_in_out":e(t.ease_in_out())}t._t>=1&&(cancelAnimationFrame(t.requ),"function"==typeof t._endFunc&&t._endFunc())}),this}},{key:"End",value:function(e){this._endFunc=e}},{key:"Stop",value:function(e){cancelAnimationFrame(this.requ),"function"==typeof e&&e()}},{key:"duration",set:function(e){this._d=e},get:function(){return this._d}},{key:"type",set:function(e){this._type=e}}]),t}(),l=function(e){var t,n=!0;return function(){return n?(t=e.apply(this,arguments),n=!1,t):(e=null,!1)}};function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function d(e,t){return e(t={exports:{}},t.exports),t.exports}var f=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=!0;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return n?(t=e.apply(this,r),n=!1,t):(e=null,!1)}}});h(f);var b=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;return function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];clearTimeout(n),n=setTimeout(function(){return e.apply(this,r)},t)}}});h(b);var v=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null,r=null,a=f.default(e),i=b.default(e,t),o=b.default(function(){a=f.default(e),r=null,cancelAnimationFrame(n)},t);return function(){for(var s=this,u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return a.apply(this,u),n=requestAnimationFrame(function(a){if(null===r&&(r=a),a-r>=t)return r=null,cancelAnimationFrame(n),e.apply(s,u)}),o(),i.apply(this,u)}}});h(v);var p=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){void 0===n&&(n={observValKeyName:"watch"});var r=e,a=n.observValKeyName;return function(e){for(var n=[],i=null,o=0;o<arguments.length;o++)arguments[o]&&arguments[o].constructor==Object?(i=arguments[o][a],delete arguments[o][a],Object.keys(arguments[o]).length>0&&n.push(arguments[o])):n.push(arguments[o]);return r!==i&&(r=i,t.apply(this,n))}}});h(p);var g=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"none"!==(e.currentStyle||getComputedStyle(e,"")).display}});h(g);var y=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=getComputedStyle(e,""),n=e.getBoundingClientRect(),r=function(e){return" "===e?0:parseFloat(e||"0px")},a=r(t.paddingTop),i=r(t.paddingBottom),o=r(t.paddingLeft),s=a+i,u=o+r(t.paddingRight),c=r(t.borderTopWidth)+r(t.borderBottomWidth),l=r(t.borderLeftWidth)+r(t.borderRightWidth),h=n.width-u-l,d=n.height-s-c,f=g.default(e)?{width:h,height:d,x:o,y:a,top:a,left:o,bottom:a+d,right:o+h}:{width:0,height:0,x:0,y:0,top:0,left:0,bottom:0,right:0};return Object.freeze(f)}});h(y),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var a,i,o=0|t,s=Math.max(o>=0?o:r-Math.abs(o),0);for(;s<r;){if((a=n[s])===(i=e)||"number"==typeof a&&"number"==typeof i&&isNaN(a)&&isNaN(i))return!0;s++}return!1}});var w=d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.instanceOfResizeWatcher=[],this.targetsAll=[],this.mutationObserverConfig={childList:!0,attributes:!0,characterData:!0,subtree:!0},this.watcher_binded=v.default(e.watcher.bind(null,this),e.THROTTLE_INTERVAL),this.mo=new MutationObserver(this.watcher_binded),this.firstCallback=b.default(f.default(function(t){t.forEach(function(t){var n=t.entries.map(function(t){if(e.isDisplay(t.target))return Object.freeze({target:t.target,contentRect:t.contentRect})}).filter(function(e){return void 0!==e});0!==n.length&&t.callback(n)})}),e.THROTTLE_INTERVAL)}return e.prototype.init=function(e){this.instanceOfResizeWatcher.push(e)},e.prototype.observe=function(){this.targetsAll=e.updateTargetsAll(this),0!==this.targetsAll.length&&e.onWatcher(this),this.entriesContaner=e.calculateEntriesContaner(this.instanceOfResizeWatcher),this.firstCallback(this.entriesContaner)},e.prototype.unobserve=function(){this.targetsAll=e.updateTargetsAll(this),this.entriesContaner=e.calculateEntriesContaner(this.instanceOfResizeWatcher)},e.prototype.disconnect=function(){this.targetsAll=e.updateTargetsAll(this),this.entriesContaner=e.calculateEntriesContaner(this.instanceOfResizeWatcher),0===this.targetsAll.length&&e.offWatcher(this)},e.watcher=function(t){t.entriesContaner.forEach(function(t){var n=t.entries.map(function(t){var n=e.calculateContentRect(t.target),r=t.valueObserver({watch:e.contentRectWHToStr(n)});if(r&&(t.contentRect=n),r)return Object.freeze({target:t.target,contentRect:t.contentRect})}).filter(function(e){return void 0!==e});0!==n.length&&t.callback(n)})},e.calculateEntriesContaner=function(t){return t.map(function(t){var n=t.targets.map(function(t){var n=e.calculateContentRect(t);return{contentRect:n,target:t,valueObserver:p.default(e.contentRectWHToStr(n),function(){return!0})}});return t.entries=n,t})},e.contentRectWHToStr=function(e){return""+e.width+e.height},e.updateTargetsAll=function(e){return e.instanceOfResizeWatcher.map(function(e){return e.targets}).reduce(function(e,t){return e.concat(t)},[])},e.onWatcher=function(e){e.mo.disconnect(),e.mo.observe(document.getElementsByTagName("html")[0],e.mutationObserverConfig),window.addEventListener("resize",e.watcher_binded,!1)},e.offWatcher=function(e){e.mo.disconnect(),window.removeEventListener("resize",e.watcher_binded)},e.calculateContentRect=function(e){return y.default(e)},e.isDisplay=function(e){return g.default(e)},Object.defineProperty(e,"THROTTLE_INTERVAL",{get:function(){return 33},enumerable:!0,configurable:!0}),e}();t.default=n});h(w);var m=h(d(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=new w.default,r=function(){function e(e){this.callback=e,this.targets=[],this.entries=[],n.init(this)}return e.prototype.observe=function(e){this.targets.includes(e)||this.targets.push(e),n.observe()},e.prototype.unobserve=function(e){this.targets=this.targets.filter(function(t){return t!==e}),n.unobserve()},e.prototype.disconnect=function(){this.targets=[],n.disconnect()},e.calculateContentRect=function(e){return w.default.calculateContentRect(e)},e.isDisplay=function(e){return w.default.isDisplay(e)},Object.defineProperty(e,"THROTTLE_INTERVAL",{get:function(){return w.default.THROTTLE_INTERVAL},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CONTROLLER",{get:function(){return n},enumerable:!0,configurable:!0}),e}();t.default=r})),R=function(e,t){var n=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];clearTimeout(n),n=setTimeout(function(){return e.apply(this,a)},t)}};Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var a,i,o=0|t,s=Math.max(o>=0?o:r-Math.abs(o),0);for(;s<r;){if((a=n[s])===(i=e)||"number"==typeof a&&"number"==typeof i&&isNaN(a)&&isNaN(i))return!0;s++}return!1}});var S="<style>".concat(":host {  overflow: hidden;  display: block;  position: relative;  height: 100%;  width: 100%;  -webkit-box-sizing: border-box;          box-sizing: border-box; }  :host * {    -webkit-box-sizing: border-box;            box-sizing: border-box; }  :host button {    background-color: transparent;    border: none;    cursor: pointer;    outline: none;    padding: 0;    -webkit-appearance: none;       -moz-appearance: none;            appearance: none;    vertical-align: top; }  :host .bar-area {    position: absolute;    width: 8px;    height: 100%;    right: 0;    background-color: rgba(0, 0, 0, 0.6); }    :host .bar-area .bar-area-padding {      height: 100%;      border: 2px solid transparent; }      :host .bar-area .bar-area-padding .bar-area-padding-inner {        height: 100%; }        :host .bar-area .bar-area-padding .bar-area-padding-inner .btn-wrap {          font-size: 0;          vertical-align: bottom; }          :host .bar-area .bar-area-padding .bar-area-padding-inner .btn-wrap .btn {            width: 100%;            height: 100%;            background-color: white; }            :host .bar-area .bar-area-padding .bar-area-padding-inner .btn-wrap .btn:hover {              opacity: 0.7; }        :host .bar-area .bar-area-padding .bar-area-padding-inner .bar-contaner {          width: 100%;          max-width: 100%;          vertical-align: bottom; }          :host .bar-area .bar-area-padding .bar-area-padding-inner .bar-contaner .bar {            cursor: pointer;            width: 100%; }            :host .bar-area .bar-area-padding .bar-area-padding-inner .bar-contaner .bar .bar-thum {              height: 100%;              font-size: 0; }              :host .bar-area .bar-area-padding .bar-area-padding-inner .bar-contaner .bar .bar-thum .bar-btn {                width: 100%;                max-height: 100%;                height: 30%;                background-color: white; }                :host .bar-area .bar-area-padding .bar-area-padding-inner .bar-contaner .bar .bar-thum .bar-btn:hover {                  opacity: 0.7; }  :host .view {    overflow: auto;    width: 100%;    height: 100%;    scrollbar-width: none;    -ms-overflow-style: none; }    :host .view::-webkit-scrollbar {      display: none; }    :host .view.select-none {      -webkit-user-select: none;         -moz-user-select: none;          -ms-user-select: none;              user-select: none;      pointer-events: none; }","</style>"),E="\n    ".concat(S,'\n    <div class="bar-area">\n        <div class="bar-area-padding">\n            <div class="bar-area-padding-inner">\n                <div class="btn-wrap"><button class="btn edge-top"></button></div>\n                <div class="bar-contaner">\n                    <div class="bar">\n                        <div class="bar-thum">\n                            <button class="bar-btn up"></button>\n                            <button class="bar-btn main-btn"></button>\n                            <button class="bar-btn down"></button>\n                        </div>\n                    </div>\n                </div>\n                <div class="btn-wrap"><button class="btn edge-bottom"></button></div>\n            </div>\n        </div>\n    </div>\n    <div class="view">\n        <div class="view-inner">\n            <slot class="contents"></slot>\n        </div>\n    </div>\n'),T=document.createElement("template");T.id="rikaaascrollbar",T.innerHTML=E,window.ShadyCSS&&ShadyCSS.prepareTemplate(T,"rikaaa-scrollbar");var O=function(t){function i(){var t,n,a;return e(this,i),n=this,t=!(a=r(i).call(this))||"object"!=typeof a&&"function"!=typeof a?s(n):a,window.ShadyCSS&&ShadyCSS.styleElement(s(t)),t.attachShadow({mode:"open"}),t.shadowRoot.appendChild(T.content.cloneNode(!0)),t.btnH=10,t.btnSeparation=2,t.barAreaMaxW=14,t.barAreaMinW=8,t.barEdgeBtnH=5,t.barBtnSeparation=2,t.allowToEdgeBtn=!1,t.allowToBarBtn=!1,t.hide=!0,t.navigation=!0,t.naviData=null,t.currentIndex=0,t.barOpend=!1,t.barSliding=!1,t.scrolling=!1,t.view=t.shadowRoot.querySelector(".view"),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(i,o(HTMLElement)),n(i,[{key:"connectedCallback",value:function(){var e,t,n=this;this.autohide&&(t=l(function(){return n.barShow(200)})),window.ResizeObserver||window.WcRikaaaResizeObserver||Object.defineProperty(window,"WcRikaaaResizeObserver",{value:m});var r,a,i,o,s,u,c,h,d=window.ResizeObserver||window.WcRikaaaResizeObserver;this.mouseScrollingFunc=function(a){a.preventDefault(),n.barPos=n.scrollRatio,n.autohide&&t(),e=l(function(){return n.barHide(200)}),n.scrolling=!0,n.autohide&&(clearTimeout(r),r=setTimeout(function(){n.scrolling=!1,n.barOpend||n.barSliding||(e(),t=l(function(){return n.barShow(200)}))},3e3))},this.mouseScrollingFunc_throtted=(a=this.mouseScrollingFunc,i=10,o=null,s=null,u=l(a),c=R(a,i),h=R(function(){u=l(a),s=null,cancelAnimationFrame(o)},i),function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return u.apply(this,n),o=requestAnimationFrame(function(t){if(null===s&&(s=t),t-s>=i)return s=null,cancelAnimationFrame(o),a.apply(e,n)}),h(),c.apply(this,n)}),this.view.addEventListener("scroll",this.mouseScrollingFunc_throtted,!1),this.scrollToEdgeFunc=function(e){var t=e.currentTarget;if(Array.from(t.classList).includes("main-btn"))return!1;Array.from(t.classList).includes("up")?n.goTo(0,300):n.goTo(1,300)},this.shadowRoot.querySelectorAll(".bar-btn").forEach(function(e){e.addEventListener("click",n.scrollToEdgeFunc)});var f,b,v;this.resizeOb=new d(function(){n.redraw(0)}),this.resizeOb.observe(this),this.barContanerClickFunc=function(e){if(!Array.from(e.target.classList).includes("bar-contaner"))return!1;var t=(e.pageY-e.currentTarget.getBoundingClientRect().top)/n.barContanerH;n.goTo(t,200)},this.shadowRoot.querySelector(".bar-contaner").addEventListener("click",this.barContanerClickFunc);var p,g,y=function(e){var t=(e.pageY-f)/(n.barContanerH-n.barHeight);n.goTo(b+t,0)};this.attachslideFunc=function(e){window.addEventListener("mousemove",y),window.addEventListener("touchmove",y),f=e.pageY,b=n.scrollRatio,n.view.classList.add("select-none"),n.barSliding=!0},this.releaseslideFunc=function(){window.removeEventListener("mousemove",y),window.removeEventListener("touchmove",y),n.view.classList.remove("select-none"),n.barSliding=!1,n.autohide&&(clearTimeout(v),v=setTimeout(function(){n.barOpend||n.scrolling||"function"!=typeof e||(e(),t=l(function(){return n.barShow(200)}))},3e3))},this.shadowRoot.querySelector(".main-btn").addEventListener("mousedown",this.attachslideFunc),this.shadowRoot.querySelector(".main-btn").addEventListener("touchstart",this.attachslideFunc),window.addEventListener("mouseup",this.releaseslideFunc),window.addEventListener("touchend",this.releaseslideFunc),window.addEventListener("mouseleave",this.releaseslideFunc),window.addEventListener("touchleave",this.releaseslideFunc),this.barOpenFunc=function(){n.allowToEdgeBtn=!0,n.allowToBarBtn=!0,n.redraw(100),n.barAreaW(n.maxwidth,100,"ease-out"),n.barOpend=!0},this.barCloseFunc=function(){n.allowToEdgeBtn=!1,n.allowToBarBtn=!1,n.redraw(80),n.barAreaW(n.minwidth,80,"ease-out"),n.barOpend=!1,n.autohide&&(clearTimeout(p),p=setTimeout(function(){n.barSliding||n.scrolling||(e(),t=l(function(){return n.barShow(200)}))},3e3))},this.shadowRoot.querySelector(".bar-area").addEventListener("mouseenter",this.barOpenFunc),this.shadowRoot.querySelector(".bar-area").addEventListener("mouseleave",this.barCloseFunc),this.naviFunc=function(e){var t=!Array.from(e.currentTarget.classList).includes("edge-top");n.goNavigation(t)},this.shadowRoot.querySelectorAll(".btn").forEach(function(e){e.addEventListener("click",n.naviFunc)}),g=function(){n.redraw(0),n.autohide&&n.barHide(0),n.dispatchEvent(new CustomEvent("load"))},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?setTimeout(function(){g()},0):document.addEventListener("DOMContentLoaded",g)}},{key:"attributeChangedCallback",value:function(e,t,n){"minwidth"===e&&this.barAreaW(Number(n),0,"ease-in"),"usenavi"===e&&this.redraw(0)}},{key:"disconnectedCallback",value:function(){var e=this;this.shadowRoot.querySelectorAll(".btn").forEach(function(t){t.removeEventListener("click",e.naviFunc)}),this.shadowRoot.querySelector(".bar-area").removeEventListener("mouseenter",this.barOpenFunc),this.shadowRoot.querySelector(".bar-area").removeEventListener("mouseleave",this.barCloseFunc),this.shadowRoot.querySelector(".main-btn").removeEventListener("mousedown",this.attachslideFunc),this.shadowRoot.querySelector(".main-btn").removeEventListener("touchstart",this.attachslideFunc),window.removeEventListener("mouseup",this.releaseslideFunc),window.removeEventListener("touchend",this.releaseslideFunc),window.removeEventListener("mouseleave",this.releaseslideFunc),window.removeEventListener("touchleave",this.releaseslideFunc),this.shadowRoot.querySelector(".bar-contaner").removeEventListener("click",this.barContanerClickFunc),this.resizeOb.disconnect(),this.shadowRoot.querySelectorAll(".bar-btn").forEach(function(t){t.removeEventListener("click",e.scrollToEdgeFunc)}),this.view.removeEventListener("scroll",this.mouseScrollingFunc_throtted)}},{key:"setBarAreaSeparation",value:function(e,t,n){var r=this.usenavi&&null!==this.naviData?e:0,a=this.shadowRoot.querySelectorAll(".btn"),i=this.shadowRoot.querySelector(".bar-contaner"),o=this.shadowRoot.querySelector(".bar-area-padding-inner"),s=a[0].getBoundingClientRect().height,u=Number(a[0].style.marginBottom.replace(/px/g,"")),l=Number(i.style.height.replace(/px/g,"")),h=o.getBoundingClientRect().height;this.barContanerH=h-2*r;var d=function(e){Array.from(a).forEach(function(n){n.style.height="".concat(s+(r-s)*e,"px");var a=u+(t-u)*e;Array.from(n.classList).includes("edge-top")?n.style.marginBottom="".concat(a,"px"):n.style.marginTop="".concat(a,"px")}),i.style.height="".concat(l+(h-2*(r+t)-l)*e,"px")};0!==n?new c("ease-in",n).Start(function(e){return d(e)}):d(1)}},{key:"setBarH",value:function(){var e=this.shadowRoot.querySelector(".bar"),t=this.viewHeight/this.areaHeight;e.style.height="".concat(100*t,"%"),this.barHeight=this.barContanerH*t}},{key:"setBarBtnSeparation",value:function(e,t,n){var r=this.shadowRoot.querySelector(".down"),a=this.shadowRoot.querySelector(".up"),i=this.shadowRoot.querySelector(".main-btn"),o=this.shadowRoot.querySelector(".bar-thum").getBoundingClientRect().height,s=r.getBoundingClientRect().height,u=i.getBoundingClientRect().height,l=Number(r.style.marginTop.replace(/px/g,"")),h=function(n){var c=(s+(e-s)*n)/o*100,h=l+(t-l)*n;Object.assign(r.style,{height:"".concat(c,"%"),marginTop:"".concat(h,"px")}),Object.assign(a.style,{height:"".concat(c,"%"),marginBottom:"".concat(h,"px")}),i.style.height="".concat((u+(o-2*e-2*t-u)*n)/o*100,"%")};0!==n?new c("ease-in",n).Start(function(e){h(e)}):h(1)}},{key:"goTo",value:function(e,t){var n=u(e,0,1),r=this.scrollRatio,a=n-r,i=this.areaHeight-this.viewHeight,o=this.view,s=function(e){o.scrollTop=i*r+i*a*e};0!==t?new c("ease-out",t).Start(function(e){return s(e)}):s(1)}},{key:"barAreaW",value:function(e,t,n){var r=this.shadowRoot.querySelector(".bar-area");Object.assign(r.style,{transition:"width ".concat(t,"ms ").concat(n),width:"".concat(e,"px")})}},{key:"navi",value:function(e){this.naviData=e}},{key:"goNavigation",value:function(e){var t=this,n=this.naviSaggestion,r=function(e){return t.shadowRoot.querySelector(".contents").assignedNodes({flattern:!0}).filter(function(e){return e.nodeType===e.ELEMENT_NODE})[0].querySelector("#".concat(e)).offsetTop},a=this.areaHeight-this.viewHeight;e?!1!==n.next&&this.goTo(r(n.next.id)/a,300):!1!==n.prev&&this.goTo(r(n.prev.id)/a,300)}},{key:"redraw",value:function(e){this.barPos=this.scrollRatio,this.allowToEdgeBtn?this.setBarAreaSeparation(this.btnH,this.btnSeparation,e):this.setBarAreaSeparation(0,0,e),this.setBarH(),this.allowToBarBtn?this.setBarBtnSeparation(this.barEdgeBtnH,this.barBtnSeparation,e):this.setBarBtnSeparation(0,0,e),this.viewHeight>=this.areaHeight?this.barHide(100):this.autohide||this.barShow(100)}},{key:"barOpacity",value:function(e,t){var n=u(e,0,1),r=this.shadowRoot.querySelector(".bar-area"),a=Number(r.style.opacity),i=n-a,o=function(e){var t=a+i*e;r.style.opacity=t,r.style.visibility=0===t?"hidden":""};0!==t?new c("ease-in",t).Start(function(e){return o(e)}):o(1)}},{key:"barShow",value:function(e){this.barOpacity(1,e)}},{key:"barHide",value:function(e){this.barOpacity(0,e)}},{key:"maxwidth",get:function(){var e=this.getAttribute("maxwidth");return null===e?this.barAreaMaxW:Number(e)}},{key:"minwidth",get:function(){var e=this.getAttribute("minwidth");return null===e?this.barAreaMinW:Number(e)}},{key:"usenavi",get:function(){var e=this.getAttribute("usenavi");return null===e?this.navigation:"trure"===e.toLowerCase()}},{key:"autohide",get:function(){var e=this.getAttribute("autohide");return null===e?this.hide:"true"===e.toLowerCase()}},{key:"root",get:function(){return this.view}},{key:"scrollRatio",get:function(){var e=this.view.scrollTop,t=this.viewHeight,n=this.areaHeight;return u(e/(n-t),0,1)}},{key:"barPos",set:function(e){var t=this.shadowRoot.querySelector(".bar"),n=this.viewHeight,r=n/(n*(n/this.areaHeight))-1;t.style.transform="translateY(".concat(100*r*e,"%)")}},{key:"naviSaggestion",get:function(){var e=this;if(null===this.naviData)return!1;var t=this.view.scrollTop,n=this.naviData,r=n.reduce(function(n,r){var a=function(t){return e.shadowRoot.querySelector(".contents").assignedNodes({flattern:!0}).filter(function(e){return e.nodeType===e.ELEMENT_NODE})[0].querySelector("#".concat(t)).offsetTop};return Math.abs(a(r.id)-t)<Math.abs(a(n.id)-t)?r:n}),a=[n.indexOf(r)-1,n.indexOf(r),n.indexOf(r)+1].map(function(e){return!(e<0||e>n.length-1)&&e});return{prev:!1!==a[0]&&n[a[0]],near:!1!==a[1]&&n[a[1]],next:!1!==a[2]&&n[a[2]]}}},{key:"areaHeight",get:function(){return this.shadowRoot.querySelector(".view-inner").getBoundingClientRect().height}},{key:"viewHeight",get:function(){return this.getBoundingClientRect().height}}],[{key:"observedAttributes",get:function(){return["minwidth","usenavi"]}}]),i}();customElements.define("rikaaa-scrollbar",O)}();